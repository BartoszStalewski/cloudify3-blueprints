node_types:
    xap.monitoredServer:
        derived_from: cloudify.nodes.Compute
        interfaces:
          cloudify.interfaces.monitoring_agent:
              install:
                implementation: diamond.diamond_agent.tasks.install
                inputs:
                  diamond_config:
                    default:
                      interval: 1
              start: diamond.diamond_agent.tasks.start
              stop: diamond.diamond_agent.tasks.stop
              uninstall: diamond.diamond_agent.tasks.uninstall

          cloudify.interfaces.monitoring:
              start:
                implementation: diamond.diamond_agent.tasks.add_collectors
                inputs:
                  collectors_config:
                    default:
                      CPUCollector: {}
                      MemoryCollector: {}
                      LoadAverageCollector: {}
                      DiskUsageCollector:
                        config:
                          devices: x?vd[a-z]+[0-9]*$
                      NetworkCollector: {}

    xap_type:
        derived_from: cloudify.nodes.ApplicationServer
        properties:
            interfacename:
                type: string
                default: 'eth1'
            GSA_JAVA_OPTIONS:
                type: string
                default: ''
            gsm_cnt:
                type: integer
                default: 0
            global_gsm_cnt:
                type: integer
                default: 0
            GSM_JAVA_OPTIONS:
                type: string
                default: ''
            lus_cnt:
                type: integer
                default: 0
            lus_port:
                type: integer
                default: 0
            LUS_JAVA_OPTIONS:
                type: string
                default: ''
            global_lus_cnt:
                type: integer
                default: 0
            gsc_cnt:
                type: integer
                default: 0
            GSC_JAVA_OPTIONS:
                type: string
                default: ''
            zones:
                type: string
                default: ''
            download_url:
                type: string
                default: http://gigaspaces-repository-eu.s3.amazonaws.com/com/gigaspaces/xap-core/10.1.0-SNAPSHOT/gigaspaces-xap-premium-10.1.0-m4-b12584-514.zip
            license_key:
                type: string
                default: ''
            lrmi_comm_min_port:
                type: integer
                default: { get_input: lrmi_comm_min_port }
            lrmi_comm_max_port:
                type: integer
                default: { get_input: lrmi_comm_max_port }

    xap_webui_type:
        derived_from: cloudify.nodes.WebServer
        properties:
            interfacename:
                type: string
                default: 'eth1'
            webui_port:
                type: integer
                default: { get_input: xap_management_webui_port }

    demo_shell_type:
        derived_from: cloudify.nodes.WebServer
        properties:
            interfacename:
                type: string
                default: 'eth1'
            port:
                type: integer
                default: 8080
            butterfly_repo:
                type: string
                default: https://github.com/CloudifySource/butterfly.git
            demo_url:
                type: string
                default: https://github.com/Gigaspaces/XAP-Interactive-Tutorial/archive/master.zip
            lrmi_comm_min_port:
                type: integer
                default: { get_input: lrmi_comm_min_port }
            lrmi_comm_max_port:
                type: integer
                default: { get_input: lrmi_comm_max_port }

    xap_gateway_type:
        derived_from: xap_type
        properties:
            space_name:
                type: string
                default: { get_input: xap_gateway_spacename }
            space_zones:
                type: string
                default: { get_input: xap_grid_zones }
            restpu_zones:
                type: string
                default: { get_input: xap_management_zones }
            gsc_cnt:
                type: integer
                default: { get_input: xap_gateway_gscs_count }
            zones:
                type: string
                default: { get_input: xap_gateway_zones }
            discport:
                type: integer
                default: { get_input: xap_gateway_discoport }
            commport:
                type: integer
                default: { get_input: xap_gateway_commport }
            gwname:
                type: string
                default: { get_input: xap_gateway_gwname }
            sources:
                type: string
                default: { get_input: xap_gateway_sources }
            targets:
                type: string
                default: { get_input: xap_gateway_targets }
            lookups:
                default: { get_input: xap_gateway_lookups }

    xap_datagrid_type:
        derived_from: xap_type